using HarmonyLib;using System;using System.Linq;using StardewModdingAPI;using StardewValley;using StardewValley.Characters;using MyChildCore.Utilities;using Microsoft.Xna.Framework.Graphics;namespace MyChildTest{    public class ModEntry : Mod    {        public static ModEntry Instance { get; private set; }        private Texture2D _testSprite;        private Harmony _harmony;        public override void Entry(IModHelper helper)        {            Instance = this;            CustomLogger.Init(Monitor);            _testSprite = helper.ModContent.Load<Texture2D>("assets/baby.png");            helper.Events.GameLoop.SaveLoaded += (s, e) => ApplyTestAppearance();            helper.Events.GameLoop.DayStarted += (s, e) => ApplyTestAppearance();            helper.Events.Player.Warped += (s, e) => ApplyTestAppearance();            _harmony = new Harmony(ModManifest.UniqueID);            _harmony.Patch(                original: AccessTools.Method(typeof(Child), nameof(Child.reloadSprite)),                postfix: new HarmonyMethod(typeof(ModEntry), nameof(AfterChildSpriteUpdate))            );        }        private void ApplyTestAppearance()        {            // getChildren()은 NetCollection<Child>이므로 ToList() 필요!            var myChild = Game1.player.getChildren().ToList().FirstOrDefault();            if (myChild == null)            {                CustomLogger.Warn("내 자녀가 없습니다.");                return;            }            // 외형 덮어씌우기 (Texture2D 직접 할당 → LoadTexture 사용!)            myChild.Sprite.LoadTexture(_testSprite);        }        public static void AfterChildSpriteUpdate(Child __instance)        {            var mod = ModEntry.Instance;            var child = Game1.player.getChildren().ToList().FirstOrDefault();            if (mod?._testSprite != null && __instance.Name == child?.Name && __instance.idOfParent.Value == child?.idOfParent.Value)            {                // Texture = ... 대신 LoadTexture 사용                __instance.Sprite.LoadTexture(mod._testSprite);            }        }    }}